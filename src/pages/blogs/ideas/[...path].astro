---
// 1. Import Content Collection utility
import { getCollection } from 'astro:content';
import MarkdownLayout from '../../../layouts/MarkdownLayout.astro';


// 2. Generate Pages from Collection
// This is Dynamic Routing. Astro is creating a page Route
// for each entry in the ideas Content Collection. This is necessary.
export async function getStaticPaths() {

    // a. Query Collection
    // Get the Ideas collection from the Content collection database
    const ideasEntries = await getCollection('ideas');

    // b. For Each entry Create a page route.
    // Specify the properties you want to pass to that page route
    // notice that the key(path) matches the filename.
    return ideasEntries.map( entry => ({
        params: { path: entry.slug},
        props: { entry: entry}
    }));

}

// 3. Get your Properties
const { entry } = Astro.props;
const { Content } = await entry.render();

---
<!-- This is a page Template for all entries 
    within the Ideas Content Collection -->
<MarkdownLayout frontmatter={entry.data}>
    <Content/>
</MarkdownLayout>
