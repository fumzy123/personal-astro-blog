---
// Import Layout
// import ContainerUtilityLayout from '../../layouts/ContainerUtilityLayout.astro';

// Import CSS
// import '../../styles/utils.css';

// Import Icons
import { Icon } from 'astro-icon/components';

// Import Smaller Component pieces
import HeaderLink from '../react/HeaderLink.jsx';
import MobileNavLink from '../MobileNavLink.astro';

const { className } = Astro.props;
const currentPath = Astro.url.pathname;
---

<!-- Header Section -->
<header class=`header container`>
  <p class="header__logo">FUMEZ</p>

  <!-- Desktop Navigation Menu -->
  <nav class="header__menu">
    <HeaderLink client:load href="/" currentPath={currentPath}>
      Home
    </HeaderLink>

    <HeaderLink
      client:load
      href="/blog-feed/"
      currentPath={currentPath}
    >
      Blog
    </HeaderLink>
    <!-- <HeaderLink client:load href="/shop/" currentPath={currentPath}>
      Shop
    </HeaderLink> -->
  </nav>

  <!-- Embed the `menu-icon` icon from `@iconify-json/mdi` -->
  <button class="header__menu-icon"><Icon name="mdi:menu" /></button>

  <!-- <div class="header__socials">
    <a
      class="header__social-media"
      href="http://www.youtube.com/@FumezCreates"
      target="_blank"></a>
    <a
      class="header__social-media"
      href="https://github.com/fumzy123"
      target="_blank"></a>
  </div> -->
</header>

<!-- Mobile Navigation -->
<div class="mobile-nav inactive">
  <nav>
    <ul class="mobile-nav__menu">
      <li>
        <MobileNavLink className="mobile-nav__link" href="/"
          >Home</MobileNavLink
        >
      </li>

      <li>
        <MobileNavLink className="mobile-nav__link" href="/blog-feed/"
          >Blog</MobileNavLink
        >
      </li>
      <li>
        <MobileNavLink className="mobile-nav__link" href="/shop/"
          >Shop</MobileNavLink
        >
      </li>
    </ul>
  </nav>
</div>

<!-- Style Header Section -->
<style>
  .header {
    /* Layout */
    display: flex;
    flex-direction: row;
    /* justify-content: space-evenly; */

    /** Box Model **/
    padding-top: 1rem;
    padding-bottom: 1rem;

    /* Position */
    position: sticky;
    top: 0;
    z-index: 9999;

    /* Background  */
    background-color: rgba(23, 24, 28, 0.5);
    backdrop-filter: blur(10px);

    /* Typography */
    color: var(--clr-columbia-blue);
  }

  .header__logo {
    flex: 1;
    /* Typography */
    font-size: var(--font-size-small);
    font-weight: bold;
  }

  .header__menu {
    display: none;
  }

  .header__menu-icon {
    /* Layout */
    /* flex: 1; */

    /* Typography  */
    font-size: 1rem;
    text-align: right;
  }

  /*  */

  .header__socials {
    /** Layout **/
    flex: 1;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    gap: 1rem;
  }

  .header__social-media {
    color: white;
    text-decoration: none;
  }

  .header__social-media:hover {
    color: #f3dfbfff;
  }

  .mobile-nav {
    /* Box Model */
    /* border: 2px solid green; */
    width: 100%;
    height: 100%;

    /* Position */
    position: absolute;
    top: 0;
    left: 0;
    z-index: 999;

    /* Layout of Elements: Center them*/
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;

    /* Background */
    background-color: var(--clr-eerie-black);
  }

  .mobile-nav__menu {
    /* List */
    list-style: none;

    /* Layout */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 1rem;
  }

  .mobile-nav__link {
    /* Typography */
    font-size: var(--size-lg);
    font-weight: 600;
    color: white;
    letter-spacing: -0.05em;
    text-decoration: none;
  }

  .inactive {
    display: none;
  }

  /* MOBILE FIRST PRE-DEFINED MEDIA QUERIES */
  /* xs */
  /* @media (min-width: 475px) {} */

  /* sm */
  /* @media (min-width: 640px) {} */

  /* md */
  @media (min-width: 768px) {
    .header__menu {
      /* Layout  */
      flex: 1;

      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 2em;

      /* Box Model */
      padding: 0;
    }

    .header__menu-icon {
      display: none;
    }
  }

  /* lg */
  /* @media (min-width: 1024px) {
  } */

  /* xl */
  /* @media (min-width: 1280px) {} */

  /* 2xl */
  /* @media (min-width: 1536px) {} */
</style>

<script>
  // Select the Menu Icon
  const headerBtn = document.querySelector('.header__menu-icon');

  // Select the Mobile Navigation div
  const mobileNav = document.querySelector(
    '.mobile-nav'
  ) as HTMLElement;

  function handleToggleClick() {
    console.log('Burger pressed');

    // Toggle inactive class
    mobileNav.classList.toggle('inactive');

    if (mobileNav.classList.contains('inactive')) {
      document.body.style.overflowY = 'auto';
    } else {
      document.body.style.overflowY = 'hidden';
    }
  }

  // Add an Event Listener to it
  headerBtn?.addEventListener('click', handleToggleClick);
</script>
